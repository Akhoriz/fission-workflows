{
  "apiVersion": "v1",
  "outputTask": "makeWhaleSayFortune",
  "tasks": {
    "internalFuncShowoff": {
      "functionRef": "noop"
    },
    "ifLongInput" : {
      "functionRef" : "if",
      "inputs" : {
        "if" : {
          "type" : "expr",
          "value" : "$.invocation.inputs.default.length() < 10"
        },
        "then" : {
          "type" : "flow",
          "value" : {
            "id" : "capitalize",
            "name" : "noop",
            "inputs" : {
              "default" : {
                "type" : "expr",
                "input" : "$.invocation.inputs.default.toUpperCase()"
              }
            }
          }
        },
        "else" : {
          "type" : "flow",
          "value" : {
            "id" : "makeItLong",
            "name" : "noop",
            "inputs" : {
              "default" : {
                "type" : "expr",
                "input" : "$.invocation.inputs.default + ' (now even longer!)'"
              }
            }
          }
        }
      }
    },
    "makeWhaleSayFortune": {
      "functionRef": "whalesay",
      "inputs" : {
        "default" : {
          "type" : "expr",
          "value" : "$.tasks.ifLongInput.output"
        }
      },
      "requires": {
        "ifLongInput" : {},
        "internalFuncShowoff" : {}
      }
    }
  }
}
